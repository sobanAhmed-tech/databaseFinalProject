<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="user_profile.css">
    <link rel="icon" href="../images/MSU-logo/default.png" />
</head>
<body>
    <header class="navbar">
        <div class="navbar-content">
            <div class="navbar-logo">
                <img src="../images/MSU-logo/default.png" alt="MSU Logo" class="logo">
            </div>
            <div class="navbar-title">
                <h1>User Profile</h1>
            </div>
            <div class="navbar-buttons">
                <button class="nav-btn logout" aria-label="Logout">Logout</button>
            </div>
        </div>
    </header>

    <main class="profile-container">
        <section class="user-profile">
            <div class="profile-header">
                <div class="profile-image">
                    <img src="data:image/jpeg;base64,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" alt="User Profile" aria-label="User Profile Picture">
                </div>
                <div class="user-details">
                    
                    <div class="contact-info">
                        <p><strong>User ID:</strong></p>

                        <p><strong>Email:</strong> john.doe@example.com</p>
                        <p><strong>Phone:</strong> 03123456789</p>
                        <p><strong>First Name:</strong> 03123456789</p>
                        <p><strong>Last Name:</strong> 03123456789</p>
                        <p><strong>Phone:</strong> 03123456789</p>
                        
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section class="successful-bids">
                <h1>
                    
                    <a href="user-cars.html" >My Listed cars</a>
                  </h1>
                  
        </section>
        
    <section class="Purchased-cars">
        <h1>
            
            <a href="Purchased-cars.html" >Purchased Vehicles</a>
          </h1>
          
</section>
<section class="Sold-cars">
    <h1>
        
        <a href="Sold-cars.html" >Sold Vehicles</a>
      </h1>
      
</section>

        
    </main>

    <footer class="custom-footer">
        <p>&copy; 2024 MSU Cars Auction. All Rights Reserved.</p>
    </footer>
    <script>
        async function fetchUserProfile() {
            try {
                const response = await fetch("/api/user"); // Fetch user info from backend
                if (!response.ok) {
                    throw new Error("Failed to fetch user profile. Please login again.");
                }
    
                const user = await response.json();
    
                // Dynamically update profile information
                document.querySelector(".contact-info p:nth-child(1)").innerHTML = `<strong>User ID:</strong> ${user.User_Id}`;
                document.querySelector(".contact-info p:nth-child(2)").innerHTML = `<strong>Email:</strong> ${user.Email_Address}`;
                document.querySelector(".contact-info p:nth-child(3)").innerHTML = `<strong>Phone:</strong> ${user.Contact_Number || 'N/A'}`;
                document.querySelector(".contact-info p:nth-child(4)").innerHTML = `<strong>First Name:</strong> ${user.First_Name}`;
                document.querySelector(".contact-info p:nth-child(5)").innerHTML = `<strong>Last Name:</strong> ${user.Last_Name}`;
                document.querySelector(".contact-info p:nth-child(6)").innerHTML = `<strong>Phone:</strong> ${user.Contact_Number || 'N/A'}`;

                //document.querySelector(".user-details img").src = user.Profile_Picture || "default-profile.png"; // Default profile picture
            } catch (err) {
                console.error(err.message);
                alert("Error fetching profile. Redirecting to login.");
                //window.location.href = "/signin";
            }
        }

        // Logout functionality
        document.querySelector(".logout").addEventListener("click", async () => {
            try {
                const response = await fetch("/logout", { method: "POST" });
                if (response.ok) {
                    alert("Logged out successfully!");
                    window.location.href = "/signin";
                } else {
                    throw new Error("Logout failed");
                }
            } catch (err) {
                console.error(err.message);
            }
        });
    
        // Initialize the page by fetching user profile
        fetchUserProfile();
    </script>
    
</body>
</html>